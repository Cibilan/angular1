<div ng-cloak>
<md-toolbar>
  <div class="md-toolbar-tools">
        <md-button href="#/orderList"
        class="md-icon-button"
        aria-label="Home">
        <md-icon md-svg-icon="img/icons/ic_home_white_48px.svg"></md-icon>
      </md-button>
      <h2 class="md-toolbar-item md-breadcrumb md-headline ng-isolate-scope">
            <span class="md-breadcrumb-page ng-binding">Dispatch Order Details</span>
          </h2>
      <span flex></span>
      <md-button class="md-raised md-accent" aria-label="Reload" ng-click= "reload()">
          Reload
        </md-button>
      <md-button class="md-icon-button md-accent" aria-label="Logout" href="#/Login">
          <md-icon md-svg-src="img/icons/ic_account_circle_white_48px.svg"></md-icon>
        </md-button>
        <div layout="row">
          <h3 class="md-toolbar-item"> <span> {{userName}} </span></h3>  
        </div>
   </div>   
</md-toolbar>

<div layout="row" layout-align="center" layout-padding>
  <md-card flex>

    <md-steppers md-selected="stepper.selected" md-stretch-steppers="always">
        <md-step label="Order Created" md-complete="stepper.step1Completed">
            <md-content layout="row">
                <md-card flex="40" >
                  <md-card-header>
                    <span class="md-title"> Steps</span>
                  </md-card-header>
                  <md-card-content>
                    <ol>
                      <li>Order Created</li>
                      <li>Create Asset</li>
                      <li>Map asset</li>
                    </ol>
                  </md-card-content>
                </md-card>
                <md-card flex = "60">
                  <md-card-title>
                    <span class="md-title">Transaction</span>
                  </md-card-title>
                  <md-card-content>
                      <table class="table">
                        <thead>
                          <tr>
                            <th> </th>
                            <th> User </th>
                            <th> Description </th>
                            <th> Timestamp </th>
                          </tr>
                        </thead>
                        <tr ng-repeat="list in stage1 | orderBy : 'timestamp' ">
                          <td> <md-icon style="color:green" md-svg-icon="img/icons/ic_done_black_16px.svg"></md-icon></td>
                          <td>{{list.user}}</td>
                          <td>{{list.transactionDescription}}</td>
                          <td>{{ list.timestamp }}</td>
                        </tr>
                      </table>
                  </md-card-content>
                </md-card>
            </md-content>
        </md-step>
        <md-step label="Ready for Dispatch" md-complete="stepper.step2Completed" ng-disabled="stepper.disable">
            <md-content layout="row">
                <md-card flex>
                  <md-card-header>
                    <span class="md-title"> Steps</span>
                  </md-card-header>
                  <md-card-content>
                    <ol>
                      <li>Ready for Dispatch</li>
                      <li>Assign Transporter</li>
                    </ol>
                  </md-card-content>
                </md-card>
                <md-card flex>
                  <md-card-title>
                    <span class="md-title">Transaction</span>
                  </md-card-title>
                  <md-card-content>
                      <table class="table">
                        <thead>
                          <tr>
                            <th> </th>
                            <th> User </th>
                            <th> Description </th>
                            <th> Timestamp </th>
                          </tr>
                        </thead>
                        <tr ng-repeat="list in stage2 | orderBy : 'timestamp' ">
                          <td> <md-icon style="color:green" md-svg-icon="img/icons/ic_done_black_16px.svg"></md-icon></td>
                          <td>{{list.user}}</td>
                          <td>{{list.transactionDescription}}</td>
                          <td>{{ list.timestamp }}</td>
                        </tr>
                      </table>
                  </md-card-content>
                </md-card>
            </md-content>
        </md-step>
        <md-step label="Arrival of Transporter" md-complete="stepper.step3Completed" ng-disabled="stepper.disable">
             <md-content layout="row">
                <md-card flex>
                  <md-card-header>
                    <span class="md-title"> Steps</span>
                  </md-card-header>
                  <md-card-content>
                    <ol>
                      <li>Arrival Of transporter</li>
                      <li>Upload Invoice</li>
                       <li>Upload E sugam</li>
                        <li>Upload LR</li>
                         <li>Upload etc</li>
                    </ol>
                  </md-card-content>
                </md-card>
                <md-card flex>
                  <md-card-title>
                    <span class="md-title">Transaction</span>
                  </md-card-title>
                  <md-card-content>
                      <table class="table">
                        <thead>
                          <tr>
                            <th> </th>
                            <th> User </th>
                            <th> Description </th>
                            <th> Timestamp </th>
                          </tr>
                        </thead>
                        <tr ng-repeat="list in stage3 | orderBy : 'timestamp' ">
                          <td> <md-icon style="color:green" md-svg-icon="img/icons/ic_done_black_16px.svg"></md-icon></td>
                          <td>{{list.user}}</td>
                          <td>{{list.transactionDescription}}</td>
                          <td>{{ list.timestamp }}</td>
                        </tr>
                      </table>
                  </md-card-content>
                </md-card>
            </md-content>
        </md-step>  
        <md-step label="Ready for Shipment" md-complete="stepper.step4Completed" ng-disabled="stepper.disable">
            <md-content layout="row">
                <md-card flex>
                 <md-card-header>
                    <span class="md-title"> Steps</span>
                  </md-card-header>
                  <md-card-content>
                    <ol>
                      <li>Ready for shipment</li>
                      <li>Confirm Loading</li>
                      <li>Confirm good received</li>
                    </ol>
                  </md-card-content>
                </md-card>
                <md-card flex>
                  <md-card-title>
                    <span class="md-title">Transaction</span>
                  </md-card-title>
                  <md-card-content>
                      <table class="table">
                        <thead>
                          <tr>
                            <th> </th>
                            <th> User </th>
                            <th> Description </th>
                            <th> Timestamp </th>
                          </tr>
                        </thead>
                        <tr ng-repeat="list in stage4 | orderBy : 'timestamp' ">
                          <td> <md-icon style="color:green" md-svg-icon="img/icons/ic_done_black_16px.svg"></md-icon></td>
                          <td>{{list.user}}</td>
                          <td>{{list.transactionDescription}}</td>
                          <td>{{ list.timestamp }}</td>
                        </tr>
                      </table>
                  </md-card-content>
                </md-card>
            </md-content>
        </md-step>
        <md-step label="In Transit" md-complete="stepper.step5Completed">
            <md-content layout="row">
                <md-card flex>
                  <md-card-header>
                    <span class="md-title"> Steps</span>
                  </md-card-header>
                  <md-card-content>
                    <ol>
                      <li>Intransit</li>
                    </ol>
                  </md-card-content>
                </md-card>
                <md-card flex>
                  <md-card-title>
                    <span class="md-title">Transaction</span>
                  </md-card-title>
                  <md-card-content>
                      <table class="table">
                        <thead>
                          <tr>
                            <th> </th>
                            <th> User </th>
                            <th> Description </th>
                            <th> Timestamp </th>
                          </tr>
                        </thead>
                        <tr ng-repeat="list in stage5 | orderBy : 'timestamp' ">
                          <td> <md-icon style="color:green" md-svg-icon="img/icons/ic_done_black_16px.svg"></md-icon></td>
                          <td>{{list.user}}</td>
                          <td>{{list.transactionDescription}}</td>
                          <td>{{ list.timestamp }}</td>
                        </tr>
                      </table>
                  </md-card-content>
                </md-card>
            </md-content>
        </md-step>
        <md-step label="Shipment Delivered" md-complete="stepper.step6Completed">
                <md-content layout="row">
                <md-card flex>
                  <md-card-header>
                    <span class="md-title"> Steps</span>
                  </md-card-header>
                  <md-card-content>
                    <ol>
                      <li>Shipment Delivered</li>
                    </ol>
                  </md-card-content>
                </md-card>
                <md-card flex>
                  <md-card-title>
                    <span class="md-title">Transaction</span>
                  </md-card-title>
                  <md-card-content>
                      <table class="table">
                        <thead>
                          <tr>
                            <th> </th>
                            <th> User </th>
                            <th> Description </th>
                            <th> Timestamp </th>
                          </tr>
                        </thead>
                        <tr ng-repeat="list in stage6 | orderBy : 'timestamp' ">
                          <td> <md-icon style="color:green" md-svg-icon="img/icons/ic_done_black_16px.svg"></md-icon></td>
                          <td>{{list.user}}</td>
                          <td>{{list.transactionDescription}}</td>
                          <td>{{ list.timestamp }}</td>
                        </tr>
                      </table>
                  </md-card-content>
                </md-card>
            </md-content>
        </md-step>
    </md-steppers>

  </md-card>
</div>    


<div layout-gt-xs layout="row" layout-align="center" layout-padding>

<md-card flex md-theme="default">

  <md-card-header>
      <md-card-header-text>
        <span class="md-title">Order Info</span>
      </md-card-header-text>
  </md-card-header>
  
  <div layout="row" layout-align="center">    
  <md-card-title >
      <md-card-title-text> 
        <span>Order ID</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{dispatchOrderDetails.dispatchOrderId}} </span>
      </md-card-title-text>
  </md-card-title>
  <md-card-title>
      <md-card-title-text> 
        <span >Buyer</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{dispatchOrderDetails.customer}} </span>
      </md-card-title-text>
  </md-card-title>
  <md-card-title>
      <md-card-title-text> 
        <span>Transporter</span> 
       </md-card-title-text>
       <md-card-title-text> 
        <span class="md-subhead"> {{dispatchOrderDetails.transporter}} </span>
      </md-card-title-text>        
  </md-card-title>

  <md-card-title>
      <md-card-title-text> 
        <span> Part# </span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{dispatchOrderDetails.partNumber}} </span>
      </md-card-title-text>
  </md-card-title>
  
  </div>
  <div layout="row" layout-align="center">    
  <md-card-title >
      <md-card-title-text> 
        <span>Quantity</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{dispatchOrderDetails.quantity}} </span>
      </md-card-title-text>
  </md-card-title>
  <md-card-title>
      <md-card-title-text> 
        <span>Source</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{dispatchOrderDetails.source}} </span>
      </md-card-title-text>
  </md-card-title>
  <md-card-title>
      <md-card-title-text> 
        <span>Destination</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{dispatchOrderDetails.customer}} </span>
      </md-card-title-text>
  </md-card-title>
  <md-card-title>
      <md-card-title-text> 
        <span>Delivery term</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{dispatchOrderDetails.deliveryTerm}} </span>
      </md-card-title-text>
  </md-card-title>
  </div>  
  <md-card-actions ng-if="show.amend">
    <md-button class="md-raised md-warn md-hue-3" ng-click = "amend()"> Amend </md-button>
    <md-button class="md-raised md-warn md-hue-3" ng-click = "drop()"> Drop </md-button>
  </md-card-actions>
</md-card>
</div>

<div layout = "row" ng-if = "show.asset" >
  <md-card flex>
     <md-card-header> 
      <md-card-header-text>
        <span class="md-title">Create Asset</span>
      </md-card-header-text>
  </md-card-header>
    <md-list-item layout-padding>
    <input type ="file" on-read-file="showContent($fileContent)"/>

     
    <md-button class="md-raised md-primary md-hue-1" ng-click = "createAsset()" >Create Assest</md-button>  
    </md-list-item>
    <div layout-padding>
    <table class="table" ng-if="content">
    <thead>
      <tr>
        <th>Asset Id</th> 
        <th>Part Number</th>
        <th>Part Description</th>
        <th>Batch Number</th>
        <th>Manufacture Date</th>
        <th>ITCHS</th>
        <th>Excise Chaper Number</th>
       </tr> 
    </thead>
    <tr ng-repeat="asset in assetList">
      <td>{{ asset.assetId }}</td>
      <td>{{ asset.partNumber }}</td>
      <td>{{ asset.partDescription }}</td>
      <td>{{ asset.batchNumer }}</td>
      <td>{{ asset.manufactureDate | date:'medium' }}</td>
      <td>{{ asset.itchs }}</td>
      <td>{{ asset.exciseChaperNumber }}</td>
    </tr>
    </table>
    </div>


  </md-card>
</div>

<div layout = "row" ng-if = "show.asset">
<md-card flex>
     <md-card-header>
      <md-card-header-text>
        <span class="md-title">Asset</span>
      </md-card-header-text>
  </md-card-header>
  <md-list-item layout-padding>      
      <md-button class="md-raised md-primary md-hue-1" ng-click = "getAsset()"> Get Open Asset</md-button>
      <md-button class="md-raised md-primary md-hue-1" ng-click = "mapAsset()"> Map Asset</md-button>      
   </md-list-item>
    <div layout-padding ng-if = "openAssetList.length > 0">
    <table class="table" >
    <thead>
      <tr>
        <th> <input type="checkbox" name= "" ng-model="selectAll" ng-click="checkAll()"> Select/Deselect All </th>
        <th>Part Number</th>
        <th>Part Description</th>
        <th>Batch Number</th>
       </tr> 
    </thead>
    <tr ng-repeat="openAsset in openAssetList">
      <td> <input type = "checkbox" name="" ng-model="selected" ng-checked="exist(openAsset)" ng-click="toggleSelection(openAsset)">{{ openAsset.assetId }} </td> 
      <td>{{ openAsset.partNumber }}</td>
      <td>{{ openAsset.partDescription }}</td>
      <td>{{ openAsset.batchNumer }}</td>
    </tr>
    </table>
    <p>{{selected}}</p>
    </div> 

</md-card>
</div>

<div>
  <md-card flex ="50" layout-padding ng-if = "show.transporter">
  <md-card-header>
      <md-card-header-text>
        <span class = "md-title">Transporter Details</span>
        </md-card-header-text>
   </md-card-header>
   <md-input-container class="md-block" flex>
      <label>Transporter</label>
      <md-select name="type" ng-model="dispatchOrderDetails.transporter">
        <md-option value="VHS Logistics">KSH Logistics</md-option>
        <md-option value="TVS Logistics">TVS Logistics</md-option>
        <md-option value="Mahindra Logistics">Mahindra Logistics</md-option>
      </md-select>
    </md-input-container>
    <md-input-container class="md-block" flex >
      <label>Vehicle Type</label>
      <md-select name="type" ng-model="dispatchOrderDetails.vehicleType">
        <md-option value="16 Tonner">16 Tonner</md-option>
        <md-option value="12 Tonner">12 Tonner</md-option>
      </md-select>
    </md-input-container>
    <md-input-container class="md-block" flex >
      <label>Load Type</label>
      <md-select name="type" ng-model="dispatchOrderDetails.loadingType">
        <md-option value="FTL">FTL</md-option>
        <md-option value="LTL">LTL</md-option>
      </md-select>
    </md-input-container>
    <md-input-container  class="md-block" flex>
        <label>Transporter Ref</label>
        <input class="md-input" ng-model="dispatchOrderDetails.transporterRef" >
    </md-input-container>
    <md-input-container  class="md-block" flex>
        <label>Weight in Kgs</label>
        <input class="md-input" ng-model="dispatchOrderDetails.weight" >
    </md-input-container>
    <md-card-actions layout="row"  layout-align="end center">
        <md-button class="md-raised md-primary" ng-click= "addTransporter()">Add Transporter</md-button>
    </md-card-actions>
  </md-card> 
</div>

<div>
  <md-card flex ="50" layout-padding ng-if="show.confirmArrival" layout-align="center">
    <md-card-header>
      <md-card-header-text>
        <span class = "md-title">Confirm Transporter Arrival</span>
      </md-card-header-text>
    </md-card-header>
    <md-card-actions layout="row"  layout-align="end center">
        <md-button class="md-raised md-primary" ng-click= "transporterArrived()">Arrived</md-button>
    </md-card-actions>

  </md-card>
</div>

<div layout="column" flex> 
  <div layout ="row" ng-if="show.documentUpload">
  <md-card flex layout-padding>
  <md-card-header>
      <md-card-header-text>
        <span class="md-title">Document Details</span>
      </md-card-header-text>
  </md-card-header>
  <md-card-content>

  <md-list-item>
    <p> Invoice</p>
      <input type ="file" id="Invoice" ng-if="show.updocumentID1"/>
      <md-button class="md-raised md-accent md-hue-1" ng-if="show.updocumentID1" ng-click = "upFile('Invoice','documentID1')">Upload Now</md-button> 
      <md-button class="md-raised md-primary md-hue-1" ng-if="show.downdocumentID1" ng-click = "downFile('documentID1')">Download</md-button> 
</md-list-item>
<md-divider ></md-divider>
<md-list-item>
    <p> Esugam</p>
      <input type ="file" ng-if="show.updocumentID2" id="Esugam"/>
      <md-button class="md-raised md-accent md-hue-1" ng-if="show.updocumentID2" ng-click = "upFile('Esugam','documentID2')">Upload Now</md-button>
      <md-button class="md-raised md-primary md-hue-1" ng-if="show.downdocumentID2" ng-click = "downFile('documentID2')">Download</md-button>  
</md-list-item>
<md-divider ></md-divider>
<md-list-item>
    <p> LR</p>
    <input type ="file" ng-if="show.updocumentID3" id="LR"/>
      <md-button class="md-raised md-accent md-hue-1" ng-if="show.updocumentID3" ng-click = "upFile('LR','documentID3')">Upload Now</md-button>
      <md-button class="md-raised md-primary md-hue-1" ng-if="show.downdocumentID3" ng-click = "downFile('documentID3')">Download</md-button>   
</md-list-item>
<md-divider ></md-divider>
<md-list-item>
    <p> ETC</p>
    <input type ="file" ng-if="show.updocumentID4" id="ETC"/>
      <md-button class="md-raised md-accent md-hue-1" ng-if="show.updocumentID4" ng-click = "upFile('ETC','documentID4')">Upload Now</md-button>
      <md-button class="md-raised md-primary md-hue-1" ng-if="show.downdocumentID4" ng-click = "downFile('documentID4')">Download</md-button>    
</md-list-item>
  </md-card-content>
  <md-card-actions layout="row" ng-if="show.readyShip" layout-align="end center">
   <md-button class="md-raised md-primary" ng-click = "readyShip()">Ready for shipment</md-button>
 </md-card-actions> 
</md-card>
</div>
<div ng-if="show.goodsLoad">
  <md-card flex ="50" layout-padding >
    <md-card-header>
      <md-card-header-text>
        <span class = "md-title">Confirm Loading of goods</span>
      </md-card-header-text>
    </md-card-header>
    <md-card-actions layout="row"  layout-align="end center">
        <md-button class="md-raised md-primary" ng-click= "confirmLoading()">Loaded</md-button>
    </md-card-actions>

  </md-card>
</div>
<div ng-if="show.goodsReceived">
  <md-card flex ="50" layout-padding >
    <md-card-header>
      <md-card-header-text>
        <span class = "md-title">Confirm Goods Received</span>
      </md-card-header-text>
    </md-card-header>
    <md-card-actions layout="row"  layout-align="end center">
        <md-button class="md-raised md-primary" ng-click= "goodsLoaded()">Loaded</md-button>
     </md-card-actions>

  </md-card>
</div>
<div ng-if="show.goodsDelivered">
  <md-card flex ="50" layout-padding >
    <md-card-header>
      <md-card-header-text>
        <span class = "md-title">Confirm Goods delivered</span>
      </md-card-header-text>
    </md-card-header>
    <md-card-actions layout="row"  layout-align="end center">
        <md-button class="md-raised md-primary" ng-click= "goodsdelivered()">Delivered</md-button>
    </md-card-actions>

  </md-card>
</div>

</div>
